!function(){"use strict";window.addEventListener("DOMContentLoaded",function(){window.scrollTo(0,0),requestAnimationFrame(function(){window.scrollTo(0,0)})}),window.addEventListener("pageshow",function(e){e.persisted||(window.scrollTo(0,0),requestAnimationFrame(function(){window.scrollTo(0,0)}))}),window.addEventListener("load",function(){window.pageYOffset>0&&window.scrollTo(0,0)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=80,n=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"})}})});const e=document.querySelector(".scroll-indicator");if(e){const t=e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector("#projects");if(t){const e=80,n=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"})}};e.addEventListener("click",t),e.addEventListener("touchstart",t)}function t(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-links")||document.querySelector("#primary-nav");if(!e||!t)return;let n=!1;function o(o){o&&(o.preventDefault(),o.stopPropagation()),n=!n,n?(t.style.display="flex",t.style.flexDirection="column",t.style.position="absolute",t.style.top="56px",t.style.left="12px",t.style.right="12px",t.style.background="rgba(255,255,255,0.98)",t.style.zIndex="1001",t.style.opacity="1",t.style.visibility="visible",t.style.transform="translateY(0)",t.style.pointerEvents="auto",t.style.padding="10px",t.style.borderRadius="10px",t.style.boxShadow="0 8px 24px rgba(0,0,0,0.08)",t.classList.add("open"),e.classList.add("active"),document.body.classList.add("menu-open"),e.setAttribute("aria-expanded","true")):(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"))}window.innerWidth<=768&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden");let s=0,i=null;e.addEventListener("touchstart",function(e){s=Date.now(),e.touches[0]&&(i={x:e.touches[0].clientX,y:e.touches[0].clientY})},{passive:!0}),e.addEventListener("touchend",function(e){if(window.innerWidth>768)return;const t=Date.now()-s;let n=!0;if(i&&e.changedTouches[0]){const t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))>10&&(n=!1)}n&&t<300&&o(e),e.preventDefault(),e.stopPropagation()},{passive:!1}),e.addEventListener("click",function(e){window.innerWidth<=768&&o(e)});t.querySelectorAll("a").forEach(o=>{o.addEventListener("click",()=>{window.innerWidth<=768&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1)})}),document.addEventListener("click",o=>{window.innerWidth>768||n&&(e.contains(o.target)||t.contains(o.target)||(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1))},!0),document.addEventListener("keydown",o=>{window.innerWidth>768||"Escape"===o.key&&n&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1)}),window.addEventListener("resize",()=>{window.innerWidth>768?(t.style.display="",t.style.opacity="",t.style.visibility="",t.style.pointerEvents="",t.style.position="",t.style.top="",t.style.left="",t.style.right="",t.style.background="",t.style.zIndex="",t.style.transform="",t.style.padding="",t.style.borderRadius="",t.style.boxShadow="",t.style.flexDirection="",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1):n&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",n=!1)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):setTimeout(t,100),window.addEventListener("load",function(){const e=document.querySelector(".nav-toggle");e&&!e.hasAttribute("data-initialized")&&(e.setAttribute("data-initialized","true"),t())});const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate"),e.target.style.opacity="1",n.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".fade-in, .fade-in-up, .slide-in-left, .slide-in-right, .animate-on-scroll").forEach(e=>{e.style.opacity="0",n.observe(e)});const o=document.querySelectorAll("section[id], header[id]"),s=document.querySelectorAll('.nav-menu a[href^="#"], .nav-links a[href^="#"]');function i(){const e=window.pageYOffset;e<200?s.forEach(e=>{e.classList.remove("active"),"#home"!==e.getAttribute("href")&&"#"!==e.getAttribute("href")||e.classList.add("active")}):o.forEach(t=>{const n=t.offsetHeight,o=t.offsetTop-100,i=t.getAttribute("id");e>o&&e<=o+n&&s.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${i}`&&e.classList.add("active")})})}if(i(),window.location.hash){const e=window.location.hash;s.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===e&&t.classList.add("active")})}const a=document.getElementById("contactForm")||document.getElementById("contact-form");if(a){a.addEventListener("submit",async e=>{e.preventDefault();const t=a.querySelector('button[type="submit"]'),n=t.textContent;t.textContent="Sending...",t.disabled=!0,t.classList.add("loading");try{const e=new FormData(a),t=a.getAttribute("action");if(t&&t.includes("formspree.io")){const n=await fetch(t,{method:"POST",headers:{Accept:"application/json"},body:e}),o=await n.json();if(!n.ok){if(o.errors){const e=o.errors.map(e=>e.message).join(", ");throw new Error(e)}throw new Error("Form submission failed")}r("Message sent successfully! I will get back to you soon.","success"),a.reset()}else r("Thank you for your message! Please email me directly at bibhu342@gmail.com","success"),a.reset()}catch(e){console.error("Form submission error:",e),r("Failed to send message. Please try emailing directly: bibhu342@gmail.com","error")}finally{t.textContent=n,t.disabled=!1,t.classList.remove("loading")}});const e=a.querySelector('input[type="email"]');e&&(e.addEventListener("blur",function(){this.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value)?(this.classList.add("error"),c(this,"Please enter a valid email address")):(this.classList.remove("error"),l(this))}),e.addEventListener("input",function(){this.classList.contains("error")&&(this.classList.remove("error"),l(this))}));a.querySelectorAll("[required]").forEach(e=>{e.addEventListener("blur",function(){this.value.trim()?(this.classList.remove("error"),l(this)):(this.classList.add("error"),c(this,"This field is required"))}),e.addEventListener("input",function(){this.value.trim()&&this.classList.contains("error")&&(this.classList.remove("error"),l(this))})})}function r(e,t){document.querySelectorAll(".notification").forEach(e=>e.remove());const n=document.createElement("div");n.className=`notification notification-${t}`,n.innerHTML=`\n      <span>${e}</span>\n      <button class="notification-close" aria-label="Close notification">&times;</button>\n    `,document.body.appendChild(n),setTimeout(()=>n.classList.add("show"),100);n.querySelector(".notification-close").addEventListener("click",()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)}),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)},5e3)}function c(e,t){const n=e.id,o=n?`${n}-error`:null;let s=o?document.getElementById(o):null;s||(s=e.nextElementSibling,s&&(s.classList.contains("form-error")||s.classList.contains("field-error"))||(s=document.createElement("span"),s.className="form-error",s.setAttribute("role","alert"),o&&(s.id=o),e.parentNode.insertBefore(s,e.nextSibling))),s.textContent=t,s.style.display="block",e.classList.add("error"),e.setAttribute("aria-invalid","true")}function l(e){const t=e.id,n=t?`${t}-error`:null,o=n?document.getElementById(n):e.nextElementSibling;o&&(o.classList.contains("form-error")||o.classList.contains("field-error"))&&(o.textContent="",o.style.display="none"),e.classList.remove("error"),e.setAttribute("aria-invalid","false")}const d=document.querySelectorAll(".filter-btn, [data-filter]"),u=document.querySelectorAll(".project-card, [data-category]");d.length>0&&u.length>0&&d.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.filter||e.getAttribute("data-filter");d.forEach(e=>e.classList.remove("active")),e.classList.add("active"),u.forEach(e=>{const n=e.dataset.category||e.getAttribute("data-category");"all"===t||n===t?(e.style.display="block",setTimeout(()=>{e.style.opacity="1",e.style.transform="scale(1)"},10)):(e.style.opacity="0",e.style.transform="scale(0.9)",setTimeout(()=>{e.style.display="none"},300))});const n=document.createElement("div");n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.className="sr-only",n.textContent=`Showing ${"all"===t?"all":t} projects`,document.body.appendChild(n),setTimeout(()=>n.remove(),1e3)})});const m=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.contains("counter-animated")||(e.target.classList.add("counter-animated"),function(e){const t=parseInt(e.dataset.target||e.getAttribute("data-target"),10);if(isNaN(t)||t<=0)return;e.textContent="0";const n=performance.now(),o=s=>{const i=s-n,a=Math.min(i/2e3,1),r=1-Math.pow(1-a,4),c=Math.floor(0+(t-0)*r);e.textContent=c,a<1?requestAnimationFrame(o):e.textContent=t};requestAnimationFrame(o)}(e.target),m.unobserve(e.target)))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".achievement-metric[data-target]").forEach(e=>{const t=e.dataset.target||e.getAttribute("data-target");t&&!isNaN(parseInt(t,10))&&(e.textContent="0",m.observe(e))});let y=document.querySelector(".back-to-top");y||(y=document.createElement("button"),y.innerHTML="↑",y.className="back-to-top",y.setAttribute("aria-label","Back to top"),y.setAttribute("type","button"),document.body.appendChild(y)),y.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});let h=document.querySelector(".scroll-progress");h||(h=document.createElement("div"),h.className="scroll-progress",h.setAttribute("role","progressbar"),h.setAttribute("aria-label","Page scroll progress"),document.body.appendChild(h));const g=document.querySelector('.site-header, header, .header, nav[role="navigation"]');if("loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.src=e.dataset.src||e.src})}else{const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src||n.src,n.classList.remove("lazy"),t.unobserve(n)}})});document.querySelectorAll("img.lazy").forEach(t=>{e.observe(t)})}document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")}),document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{const n=e.querySelectorAll("[required]");let o=!0;n.forEach(e=>{e.value.trim()||(o=!1,e.classList.add("error"),c(e,"This field is required"))}),o||t.preventDefault()})}),document.querySelectorAll('a[target="_blank"]').forEach(e=>{e.hasAttribute("rel")||e.setAttribute("rel","noopener noreferrer")}),window.addEventListener("resize",function(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}(()=>{i()},250));const v=document.getElementById("theme-toggle"),f=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");function p(e){document.documentElement.setAttribute("data-theme",e),v&&(v.setAttribute("aria-pressed","dark"===e?"true":"false"),v.setAttribute("aria-label","dark"===e?"Switch to light mode":"Switch to dark mode"))}function b(e,t={}){if("function"==typeof gtag)try{gtag("event",e,t)}catch(e){}}v&&v.addEventListener("click",function(){const e="light"===(document.documentElement.getAttribute("data-theme")||"light")?"dark":"light";p(e),localStorage.setItem("theme",e),document.body.classList.add("theme-transitioning"),window.setTimeout(()=>{document.body.classList.remove("theme-transitioning")},350),"undefined"!=typeof gtag&&gtag("event","theme_toggle",{event_category:"Engagement",event_label:e})}),f&&"function"==typeof f.addEventListener?f.addEventListener("change",e=>{localStorage.getItem("theme")||p(e.matches?"dark":"light")}):f&&"function"==typeof f.addListener&&f.addListener(e=>{localStorage.getItem("theme")||p(e.matches?"dark":"light")}),function(){const e=localStorage.getItem("theme"),t=!!f&&f.matches;p("dark"===e||"light"===e?e:t?"dark":"light")}(),document.querySelectorAll('a[href*="resume.pdf"]').forEach(e=>{e.addEventListener("click",()=>{b("resume_download",{event_category:"Downloads",event_label:"Resume PDF"})})}),document.querySelectorAll('a[href^="http"]').forEach(e=>{try{e.href.includes(window.location.hostname)||e.addEventListener("click",()=>{b("external_link_click",{event_category:"Outbound Links",event_label:e.href,link_text:(e.textContent||"").trim()})})}catch(e){}}),document.querySelectorAll('a[href*="linkedin.com"], a[href*="github.com"]').forEach(e=>{e.addEventListener("click",()=>{b("social_click",{event_category:"Social Media",event_label:e.href.includes("linkedin")?"LinkedIn":"GitHub"})})}),document.querySelectorAll('a[href^="mailto:"]').forEach(e=>{e.addEventListener("click",()=>{b("email_click",{event_category:"Contact",event_label:"Email Link"})})}),document.querySelectorAll('a[href^="tel:"]').forEach(e=>{e.addEventListener("click",()=>{b("phone_click",{event_category:"Contact",event_label:"Phone Link"})})});const w=document.getElementById("contactForm")||document.getElementById("contact-form");w&&(w.addEventListener("focusin",function(){b("form_start",{event_category:"Contact Form",event_label:"Form Started"})},{once:!0}),w.addEventListener("submit",()=>{b("form_submit",{event_category:"Contact Form",event_label:"Form Submitted"})})),document.querySelectorAll(".project-card a").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".project-card"),n=t?t.querySelector("h3"):null,o=n?n.textContent.trim():"unknown",s=(e.textContent||"").trim();b("project_click",{event_category:"Projects",event_label:`${o} - ${/demo/i.test(s)?"Live Demo":"View Code"}`})})});let L={25:!1,50:!1,75:!1,100:!1},E=null,k=window.pageYOffset;function A(){const e=window.pageYOffset;i(),e>300?y.classList.add("show"):y.classList.remove("show");const t=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=t>0?e/t*100:0;if(h.style.width=n+"%",h.setAttribute("aria-valuenow",Math.round(n)),g&&(e>50?g.classList.add("scrolled"):g.classList.remove("scrolled")),Math.abs(e-k)>10){const n=t>0?e/t*100:0;Object.keys(L).forEach(e=>{const t=Number(e);n>=t&&!L[e]&&(L[e]=!0,b("scroll_depth",{event_category:"Engagement",event_label:`${e}% Scrolled`}))}),k=e}E=null}window.addEventListener("scroll",()=>{E||(E=requestAnimationFrame(A))},{passive:!0});let S=Date.now();if(window.addEventListener("beforeunload",()=>{b("time_on_page",{event_category:"Engagement",event_label:"Time Spent",value:Math.round((Date.now()-S)/1e3)})}),"IntersectionObserver"in window){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){b("section_view",{event_category:"Navigation",event_label:e.target.id||e.target.className||"unnamed-section"})}})},{threshold:.5});document.querySelectorAll("section[id]").forEach(t=>e.observe(t))}const x=document.getElementById("accept-cookies");x&&x.addEventListener("click",()=>{localStorage.setItem("cookieConsent","accepted");const e=document.getElementById("cookie-consent");e&&(e.classList.remove("show"),setTimeout(()=>{e.style.display="none"},300)),"function"==typeof gtag&&(gtag("consent","update",{analytics_storage:"granted"}),b("cookie_consent",{event_category:"Consent",event_label:"accepted"}))});const q=document.getElementById("decline-cookies");q&&q.addEventListener("click",()=>{localStorage.setItem("cookieConsent","declined");const e=document.getElementById("cookie-consent");e&&(e.classList.remove("show"),setTimeout(()=>{e.style.display="none"},300)),"function"==typeof gtag&&(gtag("consent","update",{analytics_storage:"denied"}),b("cookie_consent",{event_category:"Consent",event_label:"declined"}))}),function(){if(!localStorage.getItem("cookieConsent")){const e=document.getElementById("cookie-consent");e&&(e.style.display="block",setTimeout(()=>e.classList.add("show"),100))}}(),document.querySelectorAll(".cat-header").forEach(e=>{e.addEventListener("click",function(){const e=this.closest(".skill-cat").querySelector(".cat-content-wrapper"),t=this.querySelector(".cat-toggle"),n=!("true"===this.getAttribute("aria-expanded"));this.setAttribute("aria-expanded",n),n?(e.style.maxHeight=e.scrollHeight+"px",e.style.opacity="1",t&&(t.textContent="▼")):(e.style.maxHeight="0",e.style.opacity="0",t&&(t.textContent="▶"))});const t=e.closest(".skill-cat").querySelector(".cat-content-wrapper"),n=e.querySelector(".cat-toggle");"true"===e.getAttribute("aria-expanded")?(t.style.maxHeight=t.scrollHeight+"px",t.style.opacity="1",n&&(n.textContent="▼")):(t.style.maxHeight="0",t.style.opacity="0",n&&(n.textContent="▶"))});const _=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("in")},e.target.dataset.delay||100*t),_.unobserve(e.target))})},{threshold:.2});document.querySelectorAll(".achievement-card").forEach(e=>{_.observe(e)}),window.dispatchEvent(new CustomEvent("portfolioReady"))}();