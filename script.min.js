!function(){"use strict";window.addEventListener("DOMContentLoaded",function(){window.scrollTo(0,0),requestAnimationFrame(function(){window.scrollTo(0,0)})}),window.addEventListener("pageshow",function(e){e.persisted||(window.scrollTo(0,0),requestAnimationFrame(function(){window.scrollTo(0,0)}))}),window.addEventListener("load",function(){window.pageYOffset>0&&window.scrollTo(0,0)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));if(t){const e=80,n=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"})}})});const e=document.querySelector(".scroll-indicator");if(e){const t=e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector("#projects");if(t){const e=80,n=t.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:n,behavior:"smooth"})}};e.addEventListener("click",t),e.addEventListener("touchstart",t)}function t(){const e=document.querySelector(".nav-toggle"),t=document.querySelector(".nav-links")||document.querySelector("#primary-nav");if(!e||!t)return;let n=!1;function o(o){o&&(o.preventDefault(),o.stopPropagation()),n=!n,n?(t.style.display="flex",t.style.flexDirection="column",t.style.position="absolute",t.style.top="56px",t.style.left="12px",t.style.right="12px",t.style.background="rgba(255,255,255,0.98)",t.style.zIndex="1001",t.style.opacity="1",t.style.visibility="visible",t.style.transform="translateY(0)",t.style.pointerEvents="auto",t.style.padding="10px",t.style.borderRadius="10px",t.style.boxShadow="0 8px 24px rgba(0,0,0,0.08)",t.classList.add("open"),e.classList.add("active"),document.body.classList.add("menu-open"),e.setAttribute("aria-expanded","true")):(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"))}window.innerWidth<=768&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden");let s=0,i=null;e.addEventListener("touchstart",function(e){s=Date.now(),e.touches[0]&&(i={x:e.touches[0].clientX,y:e.touches[0].clientY})},{passive:!0}),e.addEventListener("touchend",function(e){if(window.innerWidth>768)return;const t=Date.now()-s;let n=!0;if(i&&e.changedTouches[0]){const t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))>10&&(n=!1)}n&&t<300&&o(e),e.preventDefault(),e.stopPropagation()},{passive:!1}),e.addEventListener("click",function(e){window.innerWidth<=768&&o(e)});t.querySelectorAll("a").forEach(o=>{o.addEventListener("click",()=>{window.innerWidth<=768&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1)})}),document.addEventListener("click",o=>{window.innerWidth>768||n&&(e.contains(o.target)||t.contains(o.target)||(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1))},!0),document.addEventListener("keydown",o=>{window.innerWidth>768||"Escape"===o.key&&n&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1)}),window.addEventListener("resize",()=>{window.innerWidth>768?(t.style.display="",t.style.opacity="",t.style.visibility="",t.style.pointerEvents="",t.style.position="",t.style.top="",t.style.left="",t.style.right="",t.style.background="",t.style.zIndex="",t.style.transform="",t.style.padding="",t.style.borderRadius="",t.style.boxShadow="",t.style.flexDirection="",t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("menu-open"),e.setAttribute("aria-expanded","false"),n=!1):n&&(t.style.display="none",t.style.opacity="0",t.style.visibility="hidden",t.style.pointerEvents="none",n=!1)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):setTimeout(t,100),window.addEventListener("load",function(){const e=document.querySelector(".nav-toggle");e&&!e.hasAttribute("data-initialized")&&(e.setAttribute("data-initialized","true"),t())});const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate"),e.target.style.opacity="1",n.unobserve(e.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".fade-in, .fade-in-up, .slide-in-left, .slide-in-right, .animate-on-scroll").forEach(e=>{e.style.opacity="0",n.observe(e)});const o=document.querySelectorAll("section[id], header[id]"),s=document.querySelectorAll('.nav-menu a[href^="#"], .nav-links a[href^="#"]');function i(){const e=window.pageYOffset;e<200?s.forEach(e=>{e.classList.remove("active"),"#home"!==e.getAttribute("href")&&"#"!==e.getAttribute("href")||e.classList.add("active")}):o.forEach(t=>{const n=t.offsetHeight,o=t.offsetTop-100,i=t.getAttribute("id");e>o&&e<=o+n&&s.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${i}`&&e.classList.add("active")})})}let a;if(window.addEventListener("scroll",()=>{a||(a=setTimeout(()=>{i(),a=null},100))}),i(),window.location.hash){const e=window.location.hash;s.forEach(t=>{t.classList.remove("active"),t.getAttribute("href")===e&&t.classList.add("active")})}const r=document.getElementById("contactForm")||document.getElementById("contact-form");if(r){r.addEventListener("submit",async e=>{e.preventDefault();const t=r.querySelector('button[type="submit"]'),n=t.textContent;t.textContent="Sending...",t.disabled=!0,t.classList.add("loading");try{const e=new FormData(r),t=r.getAttribute("action");if(t&&t.includes("formspree.io")){const n=await fetch(t,{method:"POST",headers:{Accept:"application/json"},body:e}),o=await n.json();if(!n.ok){if(o.errors){const e=o.errors.map(e=>e.message).join(", ");throw new Error(e)}throw new Error("Form submission failed")}c("Message sent successfully! I will get back to you soon.","success"),r.reset()}else c("Thank you for your message! Please email me directly at bibhu342@gmail.com","success"),r.reset()}catch(e){console.error("Form submission error:",e),c("Failed to send message. Please try emailing directly: bibhu342@gmail.com","error")}finally{t.textContent=n,t.disabled=!1,t.classList.remove("loading")}});const e=r.querySelector('input[type="email"]');e&&(e.addEventListener("blur",function(){this.value&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value)?(this.classList.add("error"),l(this,"Please enter a valid email address")):(this.classList.remove("error"),d(this))}),e.addEventListener("input",function(){this.classList.contains("error")&&(this.classList.remove("error"),d(this))}));r.querySelectorAll("[required]").forEach(e=>{e.addEventListener("blur",function(){this.value.trim()?(this.classList.remove("error"),d(this)):(this.classList.add("error"),l(this,"This field is required"))}),e.addEventListener("input",function(){this.value.trim()&&this.classList.contains("error")&&(this.classList.remove("error"),d(this))})})}function c(e,t){document.querySelectorAll(".notification").forEach(e=>e.remove());const n=document.createElement("div");n.className=`notification notification-${t}`,n.innerHTML=`\n      <span>${e}</span>\n      <button class="notification-close" aria-label="Close notification">&times;</button>\n    `,document.body.appendChild(n),setTimeout(()=>n.classList.add("show"),100);n.querySelector(".notification-close").addEventListener("click",()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)}),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)},5e3)}function l(e,t){const n=e.id,o=n?`${n}-error`:null;let s=o?document.getElementById(o):null;s||(s=e.nextElementSibling,s&&(s.classList.contains("form-error")||s.classList.contains("field-error"))||(s=document.createElement("span"),s.className="form-error",s.setAttribute("role","alert"),o&&(s.id=o),e.parentNode.insertBefore(s,e.nextSibling))),s.textContent=t,s.style.display="block",e.classList.add("error"),e.setAttribute("aria-invalid","true")}function d(e){const t=e.id,n=t?`${t}-error`:null,o=n?document.getElementById(n):e.nextElementSibling;o&&(o.classList.contains("form-error")||o.classList.contains("field-error"))&&(o.textContent="",o.style.display="none"),e.classList.remove("error"),e.setAttribute("aria-invalid","false")}const u=document.querySelectorAll(".filter-btn, [data-filter]"),m=document.querySelectorAll(".project-card, [data-category]");u.length>0&&m.length>0&&u.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.filter||e.getAttribute("data-filter");u.forEach(e=>e.classList.remove("active")),e.classList.add("active"),m.forEach(e=>{const n=e.dataset.category||e.getAttribute("data-category");"all"===t||n===t?(e.style.display="block",setTimeout(()=>{e.style.opacity="1",e.style.transform="scale(1)"},10)):(e.style.opacity="0",e.style.transform="scale(0.9)",setTimeout(()=>{e.style.display="none"},300))});const n=document.createElement("div");n.setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.className="sr-only",n.textContent=`Showing ${"all"===t?"all":t} projects`,document.body.appendChild(n),setTimeout(()=>n.remove(),1e3)})});const y=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.contains("counter-animated")||(e.target.classList.add("counter-animated"),function(e){const t=parseInt(e.dataset.target||e.getAttribute("data-target"),10);if(isNaN(t)||t<=0)return;e.textContent="0";const n=performance.now(),o=s=>{const i=s-n,a=Math.min(i/2e3,1),r=1-Math.pow(1-a,4),c=Math.floor(0+(t-0)*r);e.textContent=c,a<1?requestAnimationFrame(o):e.textContent=t};requestAnimationFrame(o)}(e.target),y.unobserve(e.target)))})},{threshold:.3,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".achievement-metric[data-target]").forEach(e=>{const t=e.dataset.target||e.getAttribute("data-target");t&&!isNaN(parseInt(t,10))&&(e.textContent="0",y.observe(e))});let h=document.querySelector(".back-to-top");h||(h=document.createElement("button"),h.innerHTML="↑",h.className="back-to-top",h.setAttribute("aria-label","Back to top"),h.setAttribute("type","button"),document.body.appendChild(h)),window.addEventListener("scroll",()=>{window.pageYOffset>300?h.classList.add("show"):h.classList.remove("show")}),h.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});let g=document.querySelector(".scroll-progress");g||(g=document.createElement("div"),g.className="scroll-progress",g.setAttribute("role","progressbar"),g.setAttribute("aria-label","Page scroll progress"),document.body.appendChild(g)),window.addEventListener("scroll",()=>{const e=document.documentElement.scrollHeight-document.documentElement.clientHeight,t=window.pageYOffset/e*100;g.style.width=t+"%",g.setAttribute("aria-valuenow",Math.round(t))});const v=document.querySelector('.site-header, header, .header, nav[role="navigation"]');if(v&&window.addEventListener("scroll",()=>{window.pageYOffset>50?v.classList.add("scrolled"):v.classList.remove("scrolled")}),"loading"in HTMLImageElement.prototype){document.querySelectorAll('img[loading="lazy"]').forEach(e=>{e.src=e.dataset.src||e.src})}else{const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src||n.src,n.classList.remove("lazy"),t.unobserve(n)}})});document.querySelectorAll("img.lazy").forEach(t=>{e.observe(t)})}document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.add("keyboard-navigation")}),document.addEventListener("mousedown",()=>{document.body.classList.remove("keyboard-navigation")}),document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{const n=e.querySelectorAll("[required]");let o=!0;n.forEach(e=>{e.value.trim()||(o=!1,e.classList.add("error"),l(e,"This field is required"))}),o||t.preventDefault()})}),document.querySelectorAll('a[target="_blank"]').forEach(e=>{e.hasAttribute("rel")||e.setAttribute("rel","noopener noreferrer")}),window.addEventListener("resize",function(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}}(()=>{i()},250));const f=document.getElementById("theme-toggle"),p=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)");function b(e){document.documentElement.setAttribute("data-theme",e),f&&(f.setAttribute("aria-pressed","dark"===e?"true":"false"),f.setAttribute("aria-label","dark"===e?"Switch to light mode":"Switch to dark mode"))}function w(e,t={}){if("function"==typeof gtag)try{gtag("event",e,t)}catch(e){}}f&&f.addEventListener("click",function(){const e="light"===(document.documentElement.getAttribute("data-theme")||"light")?"dark":"light";b(e),localStorage.setItem("theme",e),document.body.classList.add("theme-transitioning"),window.setTimeout(()=>{document.body.classList.remove("theme-transitioning")},350),"undefined"!=typeof gtag&&gtag("event","theme_toggle",{event_category:"Engagement",event_label:e})}),p&&"function"==typeof p.addEventListener?p.addEventListener("change",e=>{localStorage.getItem("theme")||b(e.matches?"dark":"light")}):p&&"function"==typeof p.addListener&&p.addListener(e=>{localStorage.getItem("theme")||b(e.matches?"dark":"light")}),function(){const e=localStorage.getItem("theme"),t=!!p&&p.matches;b("dark"===e||"light"===e?e:t?"dark":"light")}(),document.querySelectorAll('a[href*="resume.pdf"]').forEach(e=>{e.addEventListener("click",()=>{w("resume_download",{event_category:"Downloads",event_label:"Resume PDF"})})}),document.querySelectorAll('a[href^="http"]').forEach(e=>{try{e.href.includes(window.location.hostname)||e.addEventListener("click",()=>{w("external_link_click",{event_category:"Outbound Links",event_label:e.href,link_text:(e.textContent||"").trim()})})}catch(e){}}),document.querySelectorAll('a[href*="linkedin.com"], a[href*="github.com"]').forEach(e=>{e.addEventListener("click",()=>{w("social_click",{event_category:"Social Media",event_label:e.href.includes("linkedin")?"LinkedIn":"GitHub"})})}),document.querySelectorAll('a[href^="mailto:"]').forEach(e=>{e.addEventListener("click",()=>{w("email_click",{event_category:"Contact",event_label:"Email Link"})})}),document.querySelectorAll('a[href^="tel:"]').forEach(e=>{e.addEventListener("click",()=>{w("phone_click",{event_category:"Contact",event_label:"Phone Link"})})});const E=document.getElementById("contactForm")||document.getElementById("contact-form");E&&(E.addEventListener("focusin",function(){w("form_start",{event_category:"Contact Form",event_label:"Form Started"})},{once:!0}),E.addEventListener("submit",()=>{w("form_submit",{event_category:"Contact Form",event_label:"Form Submitted"})})),document.querySelectorAll(".project-card a").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".project-card"),n=t?t.querySelector("h3"):null,o=n?n.textContent.trim():"unknown",s=(e.textContent||"").trim();w("project_click",{event_category:"Projects",event_label:`${o} - ${/demo/i.test(s)?"Live Demo":"View Code"}`})})});let L={25:!1,50:!1,75:!1,100:!1};window.addEventListener("scroll",()=>{const e=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;Object.keys(L).forEach(t=>{const n=Number(t);e>=n&&!L[t]&&(L[t]=!0,w("scroll_depth",{event_category:"Engagement",event_label:`${t}% Scrolled`}))})});let k=Date.now();if(window.addEventListener("beforeunload",()=>{w("time_on_page",{event_category:"Engagement",event_label:"Time Spent",value:Math.round((Date.now()-k)/1e3)})}),"IntersectionObserver"in window){const e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){w("section_view",{event_category:"Navigation",event_label:e.target.id||e.target.className||"unnamed-section"})}})},{threshold:.5});document.querySelectorAll("section[id]").forEach(t=>e.observe(t))}const A=document.getElementById("accept-cookies");A&&A.addEventListener("click",()=>{localStorage.setItem("cookieConsent","accepted");const e=document.getElementById("cookie-consent");e&&(e.classList.remove("show"),setTimeout(()=>{e.style.display="none"},300)),"function"==typeof gtag&&(gtag("consent","update",{analytics_storage:"granted"}),w("cookie_consent",{event_category:"Consent",event_label:"accepted"}))});const S=document.getElementById("decline-cookies");S&&S.addEventListener("click",()=>{localStorage.setItem("cookieConsent","declined");const e=document.getElementById("cookie-consent");e&&(e.classList.remove("show"),setTimeout(()=>{e.style.display="none"},300)),"function"==typeof gtag&&(gtag("consent","update",{analytics_storage:"denied"}),w("cookie_consent",{event_category:"Consent",event_label:"declined"}))}),function(){if(!localStorage.getItem("cookieConsent")){const e=document.getElementById("cookie-consent");e&&(e.style.display="block",setTimeout(()=>e.classList.add("show"),100))}}(),document.querySelectorAll(".cat-header").forEach(e=>{e.addEventListener("click",function(){const e=this.closest(".skill-cat").querySelector(".cat-content-wrapper"),t=this.querySelector(".cat-toggle"),n=!("true"===this.getAttribute("aria-expanded"));this.setAttribute("aria-expanded",n),n?(e.style.maxHeight=e.scrollHeight+"px",e.style.opacity="1",t&&(t.textContent="▼")):(e.style.maxHeight="0",e.style.opacity="0",t&&(t.textContent="▶"))});const t=e.closest(".skill-cat").querySelector(".cat-content-wrapper"),n=e.querySelector(".cat-toggle");"true"===e.getAttribute("aria-expanded")?(t.style.maxHeight=t.scrollHeight+"px",t.style.opacity="1",n&&(n.textContent="▼")):(t.style.maxHeight="0",t.style.opacity="0",n&&(n.textContent="▶"))});const x=new IntersectionObserver(e=>{e.forEach((e,t)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("in")},e.target.dataset.delay||100*t),x.unobserve(e.target))})},{threshold:.2});document.querySelectorAll(".achievement-card").forEach(e=>{x.observe(e)}),window.dispatchEvent(new CustomEvent("portfolioReady"))}();